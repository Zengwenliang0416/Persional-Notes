# 优化Git提交脚本

## 背景
在日常开发中，我们经常需要提交代码到Git仓库。为了规范提交信息格式，提高提交效率，同时避免提交过程中的错误，我们开发了这个Git提交脚本。

## 主要功能

### 1. 文件暂存方式选择
- 一键添加所有更改（`git add .`）
- 交互式选择更改（`git add -p`）
- 手动指定文件路径

### 2. 规范化的提交信息
提供预定义的提交类型：
- `feat`: ✨ 新功能
- `fix`: 🐛 修复bug
- `docs`: 📝 文档更新
- `style`: 💄 代码格式
- `refactor`: ♻️ 代码重构
- `perf`: ⚡️ 性能优化
- `test`: ✅ 测试相关
- `build`: 📦️ 构建相关
- `ci`: 👷 CI/CD相关
- `chore`: 🔨 其他更改
- `init`: 🎉 初始化
- `security`: 🔒 安全更新
- `deps`: 📌 依赖更新
- `i18n`: 🌐 国际化
- `typo`: ✍️ 拼写修正
- `revert`: ⏪️ 回退更改
- `merge`: 🔀 合并分支
- `release`: 🏷️ 发布版本
- `deploy`: 🚀 部署相关
- `ui`: 🎨 界面相关
- `custom`: 🎯 自定义格式

### 3. 自定义提交格式
当选择自定义格式时，可以选择以下表情：
- 🎨 改进代码结构/格式
- ⚡️ 提升性能
- 🔥 删除代码/文件
- 🐛 修复 bug
- 🚑️ 重要补丁
- ✨ 引入新功能
- 📝 撰写文档
- 🚀 部署功能
- 💄 UI/样式更新
- 🎉 初次提交
- ✅ 增加测试
- 🔒️ 修复安全问题
- 🔐 添加或更新密钥
- 🔖 发布/版本标签
- 🚨 修复编译器/linter警告
- 🚧 工作进行中
- 💚 修复CI构建问题
- ⬇️ 降级依赖
- ⬆️ 升级依赖
- 📌 固定依赖版本
- 👷 添加CI构建系统
- 📈 添加分析或跟踪代码
- ♻️ 重构代码
- ➕ 添加依赖
- ➖ 删除依赖
- 🔧 修改配置文件
- 🔨 重大重构
- 🌐 国际化与本地化
- ✏️ 修复拼写错误
- 💩 需要改进的代码
- ⏪️ 回退更改
- 🔀 合并分支
- 📦️ 更新编译文件
- 👽️ 更新外部API
- 🚚 移动/重命名文件
- 📄 添加许可证
- 💥 重大更改
- 🍱 添加资源
- ♿️ 提高可访问性
- 🔊 添加日志
- 🔇 删除日志

### 4. 错误处理和状态跟踪
- 检查Git仓库有效性
- 记录操作状态：
  - 文件暂存状态
  - 提交状态
  - 提交哈希
  - 目标分支
  - 提交信息
- 网络问题时提供恢复建议

## 使用说明

### 基本用法
1. 在Git仓库目录下运行脚本：
   - Windows: `push.bat`
   - Linux/macOS: `./push.sh`

2. 选择文件暂存方式：
   ```
   请选择提交方式:
   1. 提交所有更改 (git add .)
   2. 交互式选择文件 (git add -p)
   3. 手动输入文件路径
   ```

3. 选择提交类型：
   ```
   请选择提交类型:
   1. feat: ✨ 新功能
   2. fix: 🐛 修复bug
   ...
   21. custom: 🎯 自定义格式
   ```

4. 如果选择自定义格式，可以选择表情：
   ```
   请选择emoji:
   1. 🎨 艺术     2. 🌟 闪耀     3. 🚀 火箭
   4. 🎯 目标     5. 🎬 电影     6. 🎮 游戏
   7. 📱 手机     8. 💻 电脑     9. 🌈 彩虹
   ```

5. 输入提交描述和分支名称

### 错误恢复
当遇到网络问题时，脚本会显示：
1. 当前操作状态
   ```
   === 操作状态 ===
   1. 文件暂存: true/false
   2. 更改提交: true/false
   3. 提交哈希: [如果有]
   4. 目标分支: [分支名]
   5. 提交信息: [提交信息]
   ```

2. 恢复建议
   - 如果已经提交：
     ```
     您的更改已经提交到本地仓库。要重新推送，请执行：
     git push origin [分支名]

     如果想要撤销提交，请执行：
     git reset --soft HEAD^
     ```
   - 如果只是暂存：
     ```
     文件已暂存但未提交。要继续，请执行：
     git commit -m "[提交信息]"
     git push origin [分支名]

     如果想要撤销暂存，请执行：
     git reset
     ```

## 注意事项
1. 确保脚本具有执行权限（Linux/macOS）：
   ```bash
   chmod +x push.sh
   ```
2. Windows用户需要安装Git Bash或在命令提示符中运行
3. 脚本必须在Git仓库目录下运行
4. 建议定期更新脚本以获取最新功能

## 常见问题

### Q1: 为什么选择交互式添加文件？
A1: 交互式添加可以精确控制要提交的更改，避免提交不必要的文件。

### Q2: 提交失败后如何处理？
A2: 脚本会显示当前状态和恢复建议，按照提示执行相应命令即可。

### Q3: 如何修改默认的提交类型？
A3: 可以编辑脚本中的提交类型数组来自定义默认选项。

## 后续优化方向
1. 添加配置文件支持，允许用户自定义：
   - 提交类型
   - 表情符号
   - 默认分支
2. 多语言支持
3. 提交历史查看和管理
4. 分支管理功能
5. 提交消息模板支持
6. 集成代码检查工具

## 参考资料
1. [Conventional Commits](https://www.conventionalcommits.org/)
2. [Git Documentation](https://git-scm.com/doc)
3. [Gitmoji](https://gitmoji.dev/)
