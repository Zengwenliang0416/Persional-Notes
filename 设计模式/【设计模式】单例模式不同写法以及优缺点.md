# 【设计模式】单例模式不同写法以及优缺点

### 1. 懒汉式（线程不安全）

#### 优点

- 延迟加载，只有在使用时才会实例化，节约资源。

#### 缺点

- 线程不安全，多线程环境下不能正常工作。

#### 示例

```java
public class SingletonLazy {
    private static SingletonLazy instance;

    private SingletonLazy() {}

    public static SingletonLazy getInstance() {
        if (instance == null) {
            instance = new SingletonLazy();
        }
        return instance;
    }
}
```

### 2. 饿汉式（线程安全）

#### 优点
- 线程安全，类加载时就完成实例化，避免线程同步问题。

#### 缺点
- 类加载时就实例化，不管是否需要，可能造成资源浪费。

#### 示例
```java
public class SingletonEager {
    private static final SingletonEager INSTANCE = new SingletonEager();

    private SingletonEager() {}

    public static SingletonEager getInstance() {
        return INSTANCE;
    }
}
```

### 3. 静态内部类（线程安全）

#### 优点
- 延迟加载，线程安全（JVM保证唯一性），实现简单。

#### 缺点
- 使用反射时可能会产生多个实例。

#### 示例
```java
public class SingletonStaticInnerClass {
    private SingletonStaticInnerClass() {}

    private static class SingletonHolder {
        private static final SingletonStaticInnerClass INSTANCE = new SingletonStaticInnerClass();
    }

    public static SingletonStaticInnerClass getInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```

### 4. 双重校验锁（线程安全）

#### 优点
- 线程安全，延迟加载，效率较高。

#### 缺点
- 实现复杂，需要使用`volatile`关键字避免JVM指令重排问题。

#### 示例
```java
public class SingletonDoubleCheckedLocking {
    private volatile static SingletonDoubleCheckedLocking instance;

    private SingletonDoubleCheckedLocking() {}

    public static SingletonDoubleCheckedLocking getInstance() {
        if (instance == null) {
            synchronized (SingletonDoubleCheckedLocking.class) {
                if (instance == null) {
                    instance = new SingletonDoubleCheckedLocking();
                }
            }
        }
        return instance;
    }
}
```

### 5. 枚举（线程安全）

#### 优点
- 实现简单，自由序列化，线程安全，保证单例。

#### 缺点
- 不是懒加载，枚举类比较生僻，不够灵活。

#### 示例
```java
public enum SingletonEnum {
    INSTANCE;

    public void someMethod() {
        // 功能处理
    }
}
```

每种单例模式实现方式都有其特定的应用场景。在选择单例模式的具体实现时，需要根据实际的需求和环境来做出合适的选择。